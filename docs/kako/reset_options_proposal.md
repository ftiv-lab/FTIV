
# 提案：詳細な工場出荷時リセット (スマート初期化)

## 基本哲学
現在のアプローチである「全てを消去する」工場出荷時リセットは、最後の手段（Nuclear Option）です。
スペシャリストとして、よりきめ細やかなリセット機能の導入を提案します。ユーザーは多くの場合、「壊れたアプリの挙動（設定の不具合）」を直したいだけで、「苦労して作った作品（プリセットやシーン）」まで消したいわけではないからです。

## 技術的実装 (Technical Implementation)

### 1. ResetManager のリファクタリング
`perform_factory_reset` メソッドが、リセット対象を選択するフラグを受け取れるように変更します。

```python
class ResetManager:
    def perform_factory_reset(
        self, 
        reset_settings: bool = True, 
        reset_presets: bool = False, 
        reset_scenes: bool = False
    ) -> bool:
        # ... フラグに基づいて、target_files リストに対象ファイルを追加するロジック
```

### 2. UIの更新 (ResetConfirmDialog)
ダイアログにチェックボックスを追加し、ユーザーが削除対象を選択できるようにします。

*   [x] **設定を初期化する (Reset Application Settings)** (デフォルト: オン)
    *   *対象: `app_settings.json`, `overlay_settings.json`*
    *   *効果: 言語、テーマ、ウィンドウ位置などを初期状態に戻します。*
*   [ ] **保存したプリセットを削除 (Delete Style Presets)** (デフォルト: オフ)
    *   *対象: `json/presets/`*
    *   *効果: ユーザーが作成したスタイルプリセットを全て削除します。*
*   [ ] **保存したシーンを削除 (Delete Saved Scenes)** (デフォルト: オフ)
    *   *対象: `scenes_db.json`*
    *   *効果: 保存されたシーン構成を全て削除します。*

### 3. 用語について (Terminology)
「設定（Configuration）」と「ユーザーデータ（Data）」を明確に区別する言葉を選びます。

*   **見出し**: "アプリケーションの初期化"
*   **チェックボックス1**: "設定をリセットする (不具合修正に推奨)"
*   **チェックボックス2**: "保存したプリセットとシーンも削除する" (赤文字または別セクションで警告)

## メリット
*   **ユーザーフレンドリー**: 誤って大切なデータを消してしまう事故を防ぎます。
*   **サポートしやすい**: 「設定だけリセットしてみてください」と案内しやすくなり、ユーザーも心理的負担なく実行できます。
*   **安全**: 自動バックアップ機能は維持されるため、たとえ全てチェックを入れても、バックアップから復元可能です。
