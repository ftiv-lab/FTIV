# AI (Antigravity) 連携によるマインドマップ生成の可能性案

**作成日**: 2026-01-25
**対象**: Future Feature (AI Integration without API)

---

## 1. コンセプト概要

ユーザーのアイデア出しや議事録まとめをAI (Antigravity 等の LLM) に依頼し、その結果を **"FTIVで読み込めるJSON形式"** で出力させることで、API連携なしにAI生成マインドマップを実現する方法です。

**ワークフロー:**
1. **ユーザー**: AI に「会議の議事録をまとめて」と指示し、同時に「**FTIV用JSONフォーマット**」を提示。
2. **AI**: 指示に従い、構造化されたJSONテキストを出力。
3. **ユーザー**: JSONテキストをコピーし、`.json` ファイルとして保存（またはFTIVに貼り付け）。
4. **FTIV**: ファイルをインポートし、自動でレイアウトしてマインドマップとして表示。

---

## 2. 課題と解決策

### 課題A: JSON構造が複雑すぎる
現在の `mindmaps.json` は、各ノードに数十個のスタイル設定 (`config`) や絶対座標 (`position`) を持っており、AI にこれを手書きさせるのは困難です。

**解決策: 「インポート専用簡易スキーマ」の策定**
AI 生成用に、**構造（親子関係）とテキストのみ** に絞ったシンプルなJSON形式を新たに定義します。

**簡易スキーマ例 (Proposed):**
```json
{
  "theme": "dark_modern",  // オプション: テーマ指定
  "root": {
    "text": "会議議事録 2026-01-25",
    "children": [
      {
        "text": "決定事項",
        "children": [
          { "text": "A案を採用" },
          { "text": "予算: 50万円" }
        ]
      },
      {
        "text": "ネクストアクション",
        "children": [
          { "text": "田中: 見積書作成" }
        ]
      }
    ]
  }
}
```

### 課題B: 座標計算 (Auto Layout)
AI は視覚的なレイアウト（座標計算）が苦手です。単にJSONを作らせても、すべてのノードが `(0,0)` に重なってしまいます。

**解決策: FTIV側での「オートレイアウト」実装**
インポート時に座標 (`x, y`) がない、または `(0,0)` の場合、FTIVが自動的に放射状またはツリー状にノードを配置するアルゴリズムが必要です。（**Phase 20 のオートレイアウト機能が必須要件となります**）

---

## 3. 実現へのロードマップ

### Step 1: 簡易インポーターの実装 (FTIV側)
- **機能**: 上記のような `text` と `children` のみの再帰構造JSONを読み込む機能。
- **処理**:
    1. JSONをパースする。
    2. ルートノードを作成。
    3. 再帰的に子ノードを作成。
    4. スタイルは「デフォルト設定 (`DefaultNodeStyle`)」を適用。
    5. **重要**: 簡易的なレイアウトアルゴリズムで座標を決定（まずは単純な放射状配置でも可）。

### Step 2: 「AIへの指示書（プロンプト）」の作成
ユーザーがAIに入力するためのテンプレートテキストを作成し、ドキュメントとして配布（またはFTIV内に「プロンプトをコピー」ボタンを設置）。

**プロンプト例:**
> あなたは優秀な書記です。以下の会議録を分析し、マインドマップ形式で構造化してください。
> 出力は以下のJSONフォーマット**のみ**で行ってください。余計な説明は不要です。
>
> **フォーマット:**
> ```json
> { "root": { "text": "中心トピック", "children": [ { "text": "サブトピック" } ] } }
> ```

### Step 3: クリップボードインポート機能
ファイル保存の手間を省くため、JSONテキストをコピーした状態でFTIV上で `Ctrl+V` (または専用メニュー) を押すと、マインドマップとして即時展開される機能。

---

## 4. 導入可能性評価

| 項目 | 評価 | 備考 |
|------|:----:|------|
| **技術的実現性** | ⭐⭐⭐⭐⭐ | 非常に高い。既存の仕組みの組み合わせで可能。 |
| **コスト** | ⭐⭐⭐⭐⭐ | 低い。外部API費用ゼロ。 |
| **ユーザー利便性** | ⭐⭐⭐⭐ | コピー＆ペーストの手間はあるが、手動作成より遥かに楽。 |
| **拡張性** | ⭐⭐⭐⭐ | プロンプト次第で「アイデア出し」「要約」「TODO化」など多様に対応可能。 |

## 5. 結論

**非常に有望なアプローチです。**
APIキーの管理や課金の心配をユーザーに強いることなく、最新のAIモデル（Antigravity, ChatGPT, Claude等）の能力をフル活用できます。

**前提条件:**
Phase 20 で計画中の **「オートレイアウト機能」** の実装が、この機能のコア（座標自動計算）として不可欠です。よって、オートレイアウトの実装と合わせてこの「AIインポート機能」を開発することを強く推奨します。
