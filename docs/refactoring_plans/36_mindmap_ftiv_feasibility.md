# FTIV マインドマップ機能拡張 - 導入可能性報告書

**作成日**: 2026-01-24  
**対象**: FTIV マインドマップモード (Phase 18 完了時点)  
**参照**: 35_mindmap_market_research.md

---

## 1. FTIV 現在の実装状況

### 1.1 実装済み機能

| カテゴリ | 機能 | 状態 |
|---------|------|------|
| **構造** | 中央ノード・ブランチ展開 | ✅ 完了 |
| **構造** | 自由配置 | ✅ 完了 |
| **構造** | エッジ（ベジェ曲線） | ✅ 完了 |
| **スタイル** | フォント（ファミリー/サイズ/色） | ✅ 完了 |
| **スタイル** | 背景色 | ✅ 完了 |
| **スタイル** | グラデーション（テキスト/背景） | ✅ 完了 |
| **スタイル** | 影・縁取り | ✅ 完了 |
| **スタイル** | 透明度 | ✅ 完了 |
| **操作** | ズーム/パン | ✅ 完了 |
| **操作** | グリッド表示切替 | ✅ 完了 |
| **操作** | 全画面モード | ✅ 完了 |
| **永続化** | JSON形式保存/読み込み | ✅ 完了 |
| **UI** | PropertyPanel連携 | ✅ 完了 |
| **UI** | コンテキストメニュー | ✅ 完了 |
| **設定** | デフォルトスタイル | ✅ 完了 |

### 1.2 技術スタック
- **フレームワーク**: PySide6 (Qt6)
- **描画**: QGraphicsView / QGraphicsScene / QGraphicsItem
- **テキスト**: カスタム TextRenderer（縦書き/横書き対応）
- **データ**: Pydantic モデル + JSON シリアライズ

---

## 2. 機能別導入可能性評価

### 評価基準

| 評価 | 意味 | 実装工数目安 |
|:----:|------|------------|
| ⭐⭐⭐⭐⭐ | 即時実装可能 | 1-2日 |
| ⭐⭐⭐⭐ | 短期実装可能 | 3-5日 |
| ⭐⭐⭐ | 中期実装可能 | 1-2週間 |
| ⭐⭐ | 長期計画必要 | 1ヶ月+ |
| ⭐ | 技術的困難/優先度低 | 検討中止推奨 |

---

### 2.1 構造・レイアウト機能

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **ノード折りたたみ** | ⭐⭐⭐⭐⭐ | 1-2日 | QGraphicsItem の visibility 制御で実装可能 |
| **オートレイアウト（放射状）** | ⭐⭐⭐⭐ | 3-5日 | 位置計算アルゴリズムの実装必要 |
| **組織図レイアウト（ツリー）** | ⭐⭐⭐⭐ | 3-5日 | 放射状と共通のレイアウトエンジン |
| **タイムラインレイアウト** | ⭐⭐⭐ | 1-2週間 | 時系列データ構造の追加が必要 |
| **マトリックスレイアウト** | ⭐⭐⭐ | 1-2週間 | グリッド配置ロジックの追加 |
| **フィッシュボーン図** | ⭐⭐ | 1ヶ月+ | 特殊なノード配置と角度計算 |

**推奨優先度**: ノード折りたたみ → オートレイアウト → 組織図

---

### 2.2 スタイリング・装飾

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **アイコン/絵文字挿入** | ⭐⭐⭐⭐⭐ | 1日 | QLabel + Unicode 絵文字で即実装可能 |
| **画像挿入（ノード内）** | ⭐⭐⭐⭐ | 2-3日 | QGraphicsPixmapItem をノード内に配置 |
| **複数テーマ/スキン** | ⭐⭐⭐⭐ | 3-5日 | DefaultNodeStyle の拡張 + テーマファイル |
| **ノード形状変更** | ⭐⭐⭐ | 1-2週間 | paint() の分岐追加（矩形/角丸/楕円/ひし形） |
| **ブランチスタイル（直線/曲線/折れ線）** | ⭐⭐⭐ | 1週間 | MindMapEdge の描画モード追加 |
| **動画埋め込み** | ⭐ | 技術的困難 | QGraphicsItem での動画再生は複雑 |

**推奨優先度**: アイコン → 画像挿入 → テーマ

---

### 2.3 コンテンツ拡張

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **ノードへのメモ追加** | ⭐⭐⭐⭐⭐ | 1日 | MindMapNodeConfig にフィールド追加 + ツールチップ表示 |
| **ハイパーリンク** | ⭐⭐⭐⭐⭐ | 1日 | ダブルクリックで webbrowser.open() |
| **タグ/ラベル** | ⭐⭐⭐⭐ | 2-3日 | 小さなバッジをノード上に描画 |
| **進捗率表示** | ⭐⭐⭐⭐ | 2-3日 | プログレスバー描画 + config 追加 |
| **期限設定** | ⭐⭐⭐ | 1週間 | 日付ピッカー UI + 期限切れ警告表示 |
| **添付ファイル** | ⭐⭐⭐ | 1週間 | ファイルパス保存 + 開くアクション |

**推奨優先度**: メモ → ハイパーリンク → タグ → 進捗率

---

### 2.4 AI機能

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **AI によるマップ生成** | ⭐⭐ | 1ヶ月+ | 外部 API 統合必要 (OpenAI/Google等) |
| **AI によるアイデア拡張** | ⭐⭐ | 1ヶ月+ | 同上 |
| **AI による要約（動画/PDF）** | ⭐ | 1ヶ月+ | GitMindの強みだが、高度なAPI連携とコストが必要 |
| **AI による構造化** | ⭐⭐ | 1ヶ月+ | 外部 API 統合必要 |

**備考**: AI 機能はAPI キー管理、ネットワーク通信、UI フィードバック等の考慮が必要。ローカル LLM 統合は技術的にさらに困難。

**推奨**: ユーザー需要を確認してから検討

---

### 2.5 プロジェクト管理連携

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **タスク状態（Todo/Doing/Done）** | ⭐⭐⭐⭐⭐ | 1-2日 | enum + 色分け表示 |
| **優先度設定** | ⭐⭐⭐⭐⭐ | 1日 | アイコン + ソート機能 |
| **担当者割り当て** | ⭐⭐⭐⭐ | 2-3日 | 文字列フィールド + アイコン表示 |
| **ガントチャートビュー** | ⭐⭐ | 1ヶ月+ | 完全に別のウィジェットが必要 |

**推奨優先度**: タスク状態 → 優先度 → 担当者

---

### 2.6 コラボレーション

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **リアルタイム共同編集** | ⭐ | 技術的困難 | サーバー/WebSocket インフラ必要 |
| **共有リンク生成** | ⭐ | 技術的困難 | クラウドストレージ連携必要 |
| **編集履歴** | ⭐⭐⭐ | 1-2週間 | Undo/Redo スタックの永続化 |
| **エクスポート共有（PNG/PDF）** | ⭐⭐⭐⭐⭐ | 2-3日 | 既存のスクリーンショット機能を流用 |

**備考**: FTIVはローカルアプリケーションのため、リアルタイムコラボレーションは現行アーキテクチャでは困難。ファイル単位の共有は可能。

**推奨優先度**: エクスポート共有 → 編集履歴

---

### 2.7 プレゼンテーション

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **プレゼンモード（フルスクリーン＋ナビゲーション）** | ⭐⭐⭐⭐ | 3-5日 | 既存全画面機能の拡張 |
| **ズームイン/アウトアニメーション** | ⭐⭐⭐ | 1週間 | QPropertyAnimation で実装 |
| **スライド自動生成** | ⭐⭐ | 1ヶ月+ | プレゼン構造の定義＋UIが必要 |

**推奨優先度**: プレゼンモード

---

### 2.8 入出力・互換性

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **PNG エクスポート** | ⭐⭐⭐⭐⭐ | 1日 | QGraphicsScene.render() |
| **PDF エクスポート** | ⭐⭐⭐⭐ | 2-3日 | QPainter + QPdfWriter |
| **SVG エクスポート** | ⭐⭐⭐⭐ | 2-3日 | QSvgGenerator |
| **Markdown エクスポート** | ⭐⭐⭐⭐ | 2-3日 | ツリー構造 → 階層リスト変換 |
| **FreeMind (.mm) インポート** | ⭐⭐⭐ | 1週間 | XML パース + 構造マッピング |
| **XMind (.xmind) インポート** | ⭐⭐ | 1ヶ月+ | ZIP + JSON 複合形式のパース |

**推奨優先度**: PNG → PDF → SVG → Markdown

---

### 2.9 その他

| 機能 | 導入可能性 | 工数 | 備考 |
|------|:----------:|:----:|------|
| **キーボードショートカット拡充** | ⭐⭐⭐⭐⭐ | 1日 | 既存 QShortcut フレームワーク活用 |
| **検索/フィルター** | ⭐⭐⭐⭐ | 2-3日 | ノードテキストの検索 + ハイライト |
| **テンプレートライブラリ** | ⭐⭐⭐⭐ | 3-5日 | プリセット JSON + 選択 UI |
| **印刷最適化** | ⭐⭐⭐ | 1週間 | ページ分割 + 余白設定 |
| **アウトラインモード** | ⭐⭐⭐ | 2週間 | QTreeWidget と Scene の双方向同期ロジックが必要 |

**推奨優先度**: ショートカット → 検索 → テンプレート → アウトラインモード

---

## 3. 段階的導入ロードマップ提案

### Phase 19: 短期実装（1-2週間）🟢

**目標**: 即座に価値を提供、低リスク

| 機能 | 工数 | 優先度 |
|------|:----:|:------:|
| ノード折りたたみ | 1-2日 | ★★★ |
| アイコン/絵文字挿入 | 1日 | ★★★ |
| ノードへのメモ追加 | 1日 | ★★★ |
| ハイパーリンク | 1日 | ★★★ |
| キーボードショートカット拡充 | 1日 | ★★★ |
| PNG エクスポート | 1日 | ★★★ |

---

### Phase 20: 中期実装（3-4週間）🟡

**目標**: 構造改善と視覚表現強化

| 機能 | 工数 | 優先度 |
|------|:----:|:------:|
| オートレイアウト（放射状） | 3-5日 | ★★★ |
| 組織図レイアウト | 3-5日 | ★★★ |
| 画像挿入 | 2-3日 | ★★☆ |
| タグ/ラベル | 2-3日 | ★★☆ |
| 進捗率表示 | 2-3日 | ★★☆ |
| PDF エクスポート | 2-3日 | ★★☆ |
| 検索/フィルター | 2-3日 | ★★☆ |

---

### Phase 21: 長期実装（1-2ヶ月）🔴

**目標**: 差別化機能の追加

| 機能 | 工数 | 優先度 |
|------|:----:|:------:|
| 複数テーマ/スキン | 3-5日 | ★★☆ |
| ノード形状変更 | 1-2週間 | ★★☆ |
| プレゼンモード | 3-5日 | ★★☆ |
| テンプレートライブラリ | 3-5日 | ★★☆ |
| アウトラインモード | 2週間 | ★★☆ |
| 編集履歴 | 1-2週間 | ★☆☆ |
| タイムラインレイアウト | 1-2週間 | ★☆☆ |

---

### 検討中止推奨

以下の機能は現行アーキテクチャとの相性が悪く、コスト対効果が低い:

- リアルタイム共同編集（サーバーインフラ必要）
- AI 機能（外部 API 依存、コスト発生）
- 動画埋め込み（技術的複雑度）
- クラウド共有（インフラ構築コスト）

---

## 4. 技術的考慮事項

### 4.1 アーキテクチャへの影響

| 追加機能 | 影響範囲 | リスク |
|----------|----------|--------|
| 折りたたみ | MindMapNode, MindMapEdge | 🟢 低 |
| オートレイアウト | MindMapWidget (新規 LayoutEngine) | 🟡 中 |
| 画像挿入 | MindMapNodeConfig, MindMapNode | 🟢 低 |
| エクスポート | 新規 Exporter クラス | 🟢 低 |
| プレゼンモード | MindMapWidget 拡張 | 🟡 中 |

### 4.2 テスト戦略

- **Phase 19**: 既存テストフレームワーク内で単体テスト追加
- **Phase 20**: レイアウトエンジンの視覚的テスト（スナップショットテスト検討）
- **Phase 21**: プレゼンモードの E2E テスト

---

## 5. 結論

FTIVのマインドマップモードは、**Phase 19 の短期実装項目を追加することで、市販ソフトウェアの基本機能に匹敵するレベルに到達可能**です。

特に以下の機能は ROI が高い:
1. **ノード折りたたみ** - 大規模マップの可読性向上
2. **画像エクスポート** - 共有・印刷ニーズへの対応
3. **アイコン/メモ** - 情報の視覚的整理

AI 機能やコラボレーション機能は市場トレンドではあるものの、ローカルアプリケーションとしての FTIV のアイデンティティを考慮すると、**オフライン完結・高品質描画・縦書き対応**といった既存の強みを活かす方向が望ましい。
