# AI開発ツール戦略的使い分けガイド

**目的**: ClaudeとGeminiの強みを活かし、コスト効率を最大化しながら高品質なFTIV開発を実現する。

---

## 1. モデル特性比較

| 項目 | Claude | Gemini 3 Pro High |
|------|--------|-------------------|
| **月額コスト** | $20 (Pro) / $100-200 (Max) | $19.99 (AI Pro) |
| **使用量制限** | 厳しめ（Pro: 約150回/日） | 緩め（1500プロンプト/日） |
| **コンテキスト** | 200K tokens | 1M tokens |
| **複雑な推論** | ★★★★★ | ★★★☆☆ |
| **意図理解** | ★★★★★ | ★★★☆☆ |
| **UI/フロントエンド** | ★★★☆☆ | ★★★★★ |
| **大規模リファクタリング** | ★★★★☆ | ★★★★★ |
| **指示の正確なフォロー** | ★★★★★ | ★★★☆☆ |
| **実行速度** | 普通 | 高速 |
| **マルチモーダル** | ★★★☆☆ | ★★★★★ |

---

## 1.5 Claude内のモデル選択

Claudeには複数のモデルがあり、タスクに応じて使い分けることでコスト効率を最適化できる。

| モデル | 特徴 | 推奨タスク |
|--------|------|-----------|
| **Opus** | 最高品質、複雑な推論 | 新アーキテクチャ設計、難解なバグ調査、戦略的判断 |
| **Sonnet** | バランス良い、通常業務向け | 通常の設計、コードレビュー、実装、デバッグ |
| **Haiku** | 高速・低コスト | 軽微な修正、単純なコード生成、繰り返し作業 |

### 使い分けの目安

```
「この判断は今後の開発に大きく影響する？」
  YES → Opus
  NO → 「複雑な推論が必要？」
         YES → Sonnet
         NO → Haiku
```

### コスト感覚
- **Opus**: Sonnetの約5倍のコスト。重要な判断時のみ
- **Sonnet**: 標準。迷ったらこれ
- **Haiku**: 大量処理向け。品質要求が低いタスクに

---

## 2. タスク別AI選択ガイドライン

### 🎯 **Claude推奨タスク**（高品質重視）

#### アーキテクチャ設計
- 新機能の設計フェーズ
- 複雑なリファクタリング計画
- デザインパターン適用判断
- SOLID原則の検証

**理由**: 曖昧な要件から意図を汲み取り、10年先を見据えた設計提案が可能

#### デバッグ・問題解決
- 原因不明のバグ調査
- マルチファイル横断の論理エラー
- 競合状態やタイミング問題
- テスト失敗の根本原因分析

**理由**: 複数ファイルを横断した推論が強く、微妙なロジックエラーを発見できる

#### コードレビュー
- Pull Request レビュー
- .agent ルール準拠チェック
- セキュリティ脆弱性検証
- パフォーマンス最適化提案

**理由**: 慎重で予測可能、小規模で非破壊的な修正を提案する

#### 重要な実装
- コアロジック実装（MindMapController等）
- 複雑な状態管理
- 重要なアルゴリズム（レイアウト戦略等）
- セキュリティ関連コード

**理由**: 指示を正確にフォローし、過剰な変更を避ける

---

### ⚡ **Gemini推奨タスク**（スピード・効率重視）

#### UI/フロントエンド開発
- PySide6 ウィジェット実装
- レイアウト調整
- スタイル・テーマ設定
- ビジュアルデザイン実装

**理由**: UI作業に強く、視覚的なタスクに優れる

#### 大規模リファクタリング
- ファイル名一括変更
- インポート整理
- コードフォーマット統一
- 定型的な置換作業

**理由**: 1Mトークンのコンテキストで大規模コードベース全体を把握可能

#### 高速プロトタイピング
- 新機能の初期実装
- 実験的コード
- テストコード生成
- ダミーデータ作成

**理由**: 高速で初期ソリューションを提供、試行錯誤に最適

#### 繰り返し作業
- テストケース追加
- ドキュメント生成
- 翻訳ファイル更新（jp.json, en.json）
- ログ追加

**理由**: 使用量制限が緩く、大量の繰り返しタスクでもコスト効率が良い

#### 調査・探索タスク
- コードベース構造理解
- ライブラリAPI調査
- サンプルコード収集
- エラーメッセージ解析

**理由**: 高速で大量の情報処理、Webアクセスも可能

---

## 3. ハイブリッドワークフロー

### パターンA: 新機能開発

```
1. [Claude] 要件整理・設計フェーズ
   ↓ (.agent/roles/architect.md に従った設計)
2. [Gemini] 初期実装・プロトタイプ作成
   ↓ (高速で動く版を作成)
3. [Claude] コードレビュー・洗練化
   ↓ (品質向上・SOLID原則適用)
4. [Gemini] テストコード生成
   ↓ (大量のテストケース作成)
5. [Claude] テスト失敗時のデバッグ
   ↓ (根本原因分析)
```

### パターンB: バグ修正

```
1. [Gemini] 現象確認・初期調査
   ↓ (高速でログ・コード確認)
2. [Claude] 根本原因特定
   ↓ (複雑な推論による原因分析)
3. [Claude] 修正実装
   ↓ (慎重な修正提案)
4. [Gemini] 回帰テスト追加
```

### パターンC: リファクタリング

```
1. [Claude] リファクタリング計画策定
   ↓ (影響範囲・リスク分析)
2. [Gemini] 機械的な置換・移動
   ↓ (大規模なファイル操作)
3. [Claude] 最終確認・微調整
   ↓ (品質保証)
```

---

## 4. コスト最適化ベストプラクティス

### ✅ Claude使用量節約テクニック

1. **コンテキスト圧縮を活用**
   - 実装完了後は積極的に `/compact` を実行
   - 長い会話は適切なタイミングで圧縮

2. **明確な指示**
   - 曖昧な質問を避け、具体的なファイル・行数を指定
   - 「調査してから実装」ではなく「調査」と「実装」を分離

3. **Geminiで下調べ**
   - 探索的タスクはGeminiで実施
   - Claude投入は設計・実装・レビューに集中

4. **1ターンで完結**
   - 必要なファイルを事前にリスト化
   - 一度に複数タスクを依頼（順次やり取りを減らす）

### ✅ 使用量監視

- **Claude使用量チェック**: VS Code拡張の右下パーセンテージを定期確認
- **日次上限管理**: 重要度の低いタスクは翌日回し
- **月末調整**: 残量が少なければGeminiに切り替え

---

## 5. 実践チェックリスト

### 🤔 タスク開始前に確認

- [ ] このタスクは複雑な推論を要するか？ → Claude
- [ ] このタスクは大量・繰り返し作業か？ → Gemini
- [ ] このタスクはUI/ビジュアル中心か？ → Gemini
- [ ] このタスクは設計・アーキテクチャ判断か？ → Claude
- [ ] このタスクはコアロジックの実装か？ → Claude
- [ ] このタスクは探索・調査が主か？ → Gemini

### 📊 セッション終了時に振り返り

- [ ] 適切なAIを選択できたか？
- [ ] コスト効率は良かったか？
- [ ] 品質は満足できるか？
- [ ] 次回改善できる点は？

---

## 6. リスク管理

### ⚠️ Claude使用時の注意

- **過剰設計の兆候**: 要求以上の機能追加提案 → 明示的に拒否
- **使用量超過**: 75%超えたら重要タスクのみに限定
- **コンテキスト肥大化**: 定期的な `/compact` で対応

### ⚠️ Gemini使用時の注意

- **指示不履行**: 具体的・明確な指示を徹底、曖昧な表現を避ける
- **過剰変更**: 変更範囲を明示的に制限（例: "この関数のみ修正"）
- **メモリ問題**: 重要な変更後は動作確認を必ず実施
- **品質保証**: Gemini実装後はClaude or 人間レビューを推奨

---

## 7. 効果測定指標

### KPI設定

- **開発速度**: 機能実装時間（Gemini活用で短縮）
- **コード品質**: テスト通過率・バグ発生率（Claude活用で向上）
- **コスト効率**: AI使用量 vs 生産性（月次レビュー）
- **開発者満足度**: ツール選択の適切さ（週次振り返り）

---

## 8. 今後の進化対応

### 定期的な戦略見直し（3ヶ月ごと）

- [ ] 新モデルのリリース確認（Claude 5.0, Gemini 4等）
- [ ] 価格体系の変更確認
- [ ] 使用量制限の変更確認
- [ ] FTIV開発フェーズの変化に応じた戦略調整

---

## 参考資料

このガイドは以下の業界調査を基に作成：

- [Gemini vs Claude for Coding in 2025](https://www.index.dev/blog/gemini-vs-claude-for-coding)
- [Save 90% on AI Costs Using Claude, Codex & Gemini](https://zencoder.ai/blog/save-90-on-ai-costs-using-claude-codex-gemini-2025-guide)
- [Best Practices for Using AI in Software Development 2025](https://www.leanware.co/insights/best-practices-ai-software-development)
- [Building an AI-Native Engineering Team (OpenAI)](https://developers.openai.com/codex/guides/build-ai-native-engineering-team/)
- [Claude vs. Gemini Comparison (DataCamp)](https://www.datacamp.com/blog/claude-vs-gemini)

---

**最終更新**: 2026-01-26
**次回レビュー予定**: 2026-04-26
