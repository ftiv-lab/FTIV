# Phase 4: Testing (Geminiæ‹…å½“)

**Task ID**: `{{TASK_ID}}`
**Task Title**: `{{TASK_TITLE}}`
**Started**: `{{START_TIME}}`
**AI**: Gemini 3 Pro High (Antigravity)

---

## ğŸ“– é–‹å§‹å‰ã®å¿…èª­ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

```bash
# å¿…ãšæœ€åˆã«èª­ã‚“ã§ãã ã•ã„
cat .ftiv-task/{{TASK_ID}}/review_report.md
cat .ftiv-task/{{TASK_ID}}/handoff_to_gemini_test.md
```

**ç›®çš„**: åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’ä½œæˆã—ã€å“è³ªã‚’ä¿è¨¼ã™ã‚‹ã€‚
**åŸå‰‡**: Phase 1ã®ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã‚’å…¨ã¦ã‚«ãƒãƒ¼ã™ã‚‹ã€‚

---

## 1ï¸âƒ£ ãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

Phase 3ã‹ã‚‰å¼•ãç¶™ãŒã‚ŒãŸãƒ†ã‚¹ãƒˆé …ç›®ã§ã™ã€‚
å…¨ã¦å®Ÿè£…ãƒ»ãƒ‘ã‚¹ã—ãŸã‚‰ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

### âœ… æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ
- [ ] `test_{{test_name_1}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]
- [ ] `test_{{test_name_2}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]
- [ ] `test_{{test_name_3}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]

### âš ï¸ ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆ
- [ ] `test_error_{{test_name_1}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]
- [ ] `test_error_{{test_name_2}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]

### ğŸ”¬ ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] `test_edge_{{test_name_1}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]
- [ ] `test_edge_{{test_name_2}}`: [ãƒ†ã‚¹ãƒˆå†…å®¹]

### ğŸ”„ å›å¸°ãƒ†ã‚¹ãƒˆ
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹ã™ã‚‹ï¼ˆ141/141ç­‰ï¼‰

---

## 2ï¸âƒ£ ãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ­ã‚°

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `tests/mindmap/test_{{FEATURE_NAME}}.py`

**å®Ÿè£…ã—ãŸãƒ†ã‚¹ãƒˆ**:
```python
import pytest
from PySide6.QtCore import QPointF
from ui.controllers.mindmap_controller import MindMapController
# ... (å¿…è¦ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆ)

class MockMindMapWidget:
    """ãƒ†ã‚¹ãƒˆç”¨ãƒ¢ãƒƒã‚¯."""
    def __init__(self, qapp):
        # ... (ãƒ¢ãƒƒã‚¯å®Ÿè£…)
        pass

def test_{{test_name_1}}(qapp):
    """[ãƒ†ã‚¹ãƒˆã®ç›®çš„]."""
    # Given (æº–å‚™)
    widget = MockMindMapWidget(qapp)
    controller = MindMapController(widget)

    # When (å®Ÿè¡Œ)
    result = controller.some_method()

    # Then (æ¤œè¨¼)
    assert result == expected_value
```

---

### [YYYY-MM-DD HH:MM] ãƒ†ã‚¹ãƒˆ1å®Ÿè£…
**ãƒ†ã‚¹ãƒˆå**: `test_{{test_name_1}}`
**ç›®çš„**: [ä½•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‹]

**å®Ÿè£…å†…å®¹**:
- [ã‚¹ãƒ†ãƒƒãƒ—1]
- [ã‚¹ãƒ†ãƒƒãƒ—2]
- [æ¤œè¨¼é …ç›®]

**çµæœ**: âœ… PASSED / âŒ FAILED
ï¼ˆå¤±æ•—ã—ãŸå ´åˆã¯åŸå› ã¨ä¿®æ­£å†…å®¹ã‚‚è¨˜è¼‰ï¼‰

---

### [YYYY-MM-DD HH:MM] ãƒ†ã‚¹ãƒˆ2å®Ÿè£…
ï¼ˆåŒæ§˜ã«è¨˜è¼‰ï¼‰

---

## 3ï¸âƒ£ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ

### æ–°è¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# æ–°è¦ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
pytest tests/mindmap/test_{{FEATURE_NAME}}.py -v

# çµæœ
test_{{test_name_1}} PASSED
test_{{test_name_2}} PASSED
test_{{test_name_3}} PASSED
...

âœ… X passed in Y.YYs
```

**ã¾ãŸã¯å¤±æ•—ãŒã‚ã‚‹å ´åˆ**:
```bash
âŒ X passed, Y failed

FAILED test_{{test_name}}: AssertionError
[ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸]
[åŸå› åˆ†æ]
[ä¿®æ­£å†…å®¹]
```

---

### å…¨ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# æ—¢å­˜ãƒ†ã‚¹ãƒˆå«ã‚ã¦å…¨ä½“å®Ÿè¡Œ
pytest tests/ -v

# çµæœ
âœ… 145 passed in X.XXs (æ–°è¦4ãƒ†ã‚¹ãƒˆè¿½åŠ )
```

**ã¾ãŸã¯å›å¸°ãŒã‚ã£ãŸå ´åˆ**:
```bash
âŒ 143 passed, 2 failed
  - tests/existing/test_old.py::test_xxx
    [åŸå› : æ–°æ©Ÿèƒ½ãŒæ—¢å­˜æ©Ÿèƒ½ã«å½±éŸ¿]
    [ä¿®æ­£å†…å®¹]
```

---

### ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
```bash
pytest tests/ --cov=ui.mindmap.{{module_name}} --cov-report=term

# çµæœ
Name                                Stmts   Miss  Cover
---------------------------------------------------------
ui/mindmap/{{module_name}}.py        150      5    97%
---------------------------------------------------------
TOTAL                                150      5    97%

# ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„è¡Œ
Missing lines: 42, 58, 103-105
[ã“ã‚Œã‚‰ã®è¡ŒãŒã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„ç†ç”±]
```

**é‡è¦ãƒ‘ã‚¹ã®ã‚«ãƒãƒ¬ãƒƒã‚¸**: 100% âœ…

---

## 4ï¸âƒ£ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

### å¤§é‡ãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ
```python
@pytest.mark.performance
def test_performance_large_scale(qapp):
    """å¤§é‡ãƒãƒ¼ãƒ‰ï¼ˆ1000å€‹ï¼‰æ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ."""
    import time

    widget = MockMindMapWidget(qapp)
    controller = MindMapController(widget)

    start = time.time()
    # 1000ãƒãƒ¼ãƒ‰è¿½åŠ 
    for i in range(1000):
        controller.add_node(f"Node {i}")
    elapsed = time.time() - start

    # 1ç§’ä»¥å†…ã«å®Œäº†ã™ã‚‹ã‹
    assert elapsed < 1.0, f"Too slow: {elapsed}s"
```

**å®Ÿè¡Œçµæœ**:
- **1000ãƒãƒ¼ãƒ‰è¿½åŠ **: X.XXs âœ… (< 1.0s)
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨ˆç®—**: Y.YYs âœ… (< 0.5s)

**è©²å½“ãªã—**: â–¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã¯ä¸è¦

---

## 5ï¸âƒ£ æ‰‹å‹•ç¢ºèªï¼ˆE2Eãƒ†ã‚¹ãƒˆï¼‰

è‡ªå‹•ãƒ†ã‚¹ãƒˆã§ã‚«ãƒãƒ¼ã§ããªã„ã€UIæ“ä½œã‚’ä¼´ã†ç¢ºèªé …ç›®ã§ã™ã€‚

```bash
python main.py
```

### ç¢ºèªé …ç›®
- [ ] [ç¢ºèª1: ä¾‹: ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹]
- [ ] [ç¢ºèª2: ä¾‹: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹]
- [ ] [ç¢ºèª3: ä¾‹: ã‚¨ãƒ©ãƒ¼æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹]
- [ ] [ç¢ºèª4: ä¾‹: æ—¢å­˜æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹]

**ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ** (ä»»æ„):
- `screenshots/{{FEATURE_NAME}}_before.png`
- `screenshots/{{FEATURE_NAME}}_after.png`

---

## 6ï¸âƒ£ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

### ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

#### `utils/locales/jp.json`
```json
{
  "new_key_1": "æ–°ã—ã„ãƒ©ãƒ™ãƒ«",
  "new_key_2": "åˆ¥ã®ãƒ©ãƒ™ãƒ«"
}
```

#### `utils/locales/en.json`
```json
{
  "new_key_1": "New Label",
  "new_key_2": "Another Label"
}
```

---

### READMEæ›´æ–°ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«**: `README.md` or `docs/features/{{FEATURE_NAME}}.md`

**è¿½åŠ å†…å®¹**:
```markdown
## æ–°æ©Ÿèƒ½: {{FEATURE_NAME}}

[æ©Ÿèƒ½ã®èª¬æ˜]

### ä½¿ã„æ–¹
1. [ã‚¹ãƒ†ãƒƒãƒ—1]
2. [ã‚¹ãƒ†ãƒƒãƒ—2]
```

**æ›´æ–°ãªã—**: âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã¯ä¸è¦

---

### ã‚³ãƒ¡ãƒ³ãƒˆãƒ»docstringè¿½åŠ ï¼ˆå¿…è¦ãªå ´åˆï¼‰
Phase 3ã§ClaudeãŒè¿½åŠ ã—ã¦ã„ãªã„é‡è¦ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Œã°è¿½åŠ ï¼š
```python
# è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®èª¬æ˜ã‚³ãƒ¡ãƒ³ãƒˆç­‰
```

---

## 7ï¸âƒ£ ç™ºè¦‹ã—ãŸãƒã‚°ãƒ»å•é¡Œ

### ğŸ› Phase 4ã§ç™ºè¦‹ã—ãŸãƒã‚°
| ãƒã‚° | å†ç¾æ‰‹é † | ä¿®æ­£å†…å®¹ |
|------|---------|---------|
| [ãƒã‚°1] | [æ‰‹é †] | [ä¿®æ­£] |

**ãƒã‚°ãªã—**: âœ… Phase 4ã§æ–°è¦ãƒã‚°ã¯ç™ºè¦‹ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ

---

### ğŸ’¡ å°†æ¥çš„ãªæ”¹å–„ææ¡ˆ
- [ææ¡ˆ1: ä¾‹: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•ç”Ÿæˆã‚’æ¤œè¨]
- [ææ¡ˆ2: ä¾‹: E2Eãƒ†ã‚¹ãƒˆã®è‡ªå‹•åŒ–ã‚’æ¤œè¨]

---

## 8ï¸âƒ£ Test Report ã‚µãƒãƒªãƒ¼

### ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœçµ±è¨ˆ
- **æ–°è¦ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ•°**: XXå€‹
- **å…¨ãƒ†ã‚¹ãƒˆçµæœ**: XXX passed, 0 failed
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: æ–°è¦ã‚³ãƒ¼ãƒ‰XX%, é‡è¦ãƒ‘ã‚¹100%
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å…¨é …ç›®ã‚¯ãƒªã‚¢

### âœ… å“è³ªä¿è¨¼
- [ ] å…¨æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆãŒé€šé
- [ ] å…¨ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆãŒé€šé
- [ ] å…¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆãŒé€šé
- [ ] æ—¢å­˜æ©Ÿèƒ½ã®å›å¸°ãªã—
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŸºæº–é”æˆï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
- [ ] æ‰‹å‹•ç¢ºèªå®Œäº†

### ğŸ“ ç·è©•
[ãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚’é€šã˜ã¦å¾—ã‚‰ã‚ŒãŸæ‰€æ„Ÿã€‚å“è³ªã¸ã®è‡ªä¿¡åº¦ã€æ®‹å­˜ãƒªã‚¹ã‚¯ç­‰ã€‚]

**å“è³ªã¸ã®è‡ªä¿¡åº¦**: â­â­â­â­â­ (5/5)

---

## ğŸ‰ ã‚¿ã‚¹ã‚¯å®Œäº†ç¢ºèª

### æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] å…¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå®Ÿè£…æ¸ˆã¿ï¼ˆPhase 1ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã‚«ãƒãƒ¼ï¼‰
- [ ] ãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹ï¼ˆXXX/XXXï¼‰
- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèªæ¸ˆã¿ï¼ˆé‡è¦ãƒ‘ã‚¹ã¯100%ï¼‰
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ»ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆæ¸ˆã¿
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°æ¸ˆã¿ï¼ˆå¿…è¦ãªã‚‰ï¼‰
- [ ] æ‰‹å‹•ç¢ºèªå®Œäº†
- [ ] ã‚¿ã‚¹ã‚¯ã®å—ã‘å…¥ã‚ŒåŸºæº–ã‚’å…¨ã¦æº€ãŸã—ã¦ã„ã‚‹

**å…¨ã¦ãƒã‚§ãƒƒã‚¯OKï¼Ÿ** â†’ `python scripts/task_manager.py complete-task` ã‚’å®Ÿè¡Œã—ã¦ã‚¿ã‚¹ã‚¯å®Œäº†ï¼

---

## ğŸ“¦ æˆæœç‰©ãƒªã‚¹ãƒˆ

Phase 1-4ã§ä½œæˆã•ã‚ŒãŸå…¨æˆæœç‰©ã®ã¾ã¨ã‚ï¼š

### Phase 1 (Design)
- `.ftiv-task/{{TASK_ID}}/adr.md` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šè¨˜éŒ²
- `.ftiv-task/{{TASK_ID}}/design_spec.md` - è¨­è¨ˆä»•æ§˜æ›¸

### Phase 2 (Implementation)
- `[å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«1]`
- `[å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«2]`
- `.ftiv-task/{{TASK_ID}}/implementation_log.md` - å®Ÿè£…ãƒ­ã‚°

### Phase 3 (Refinement)
- `[æ´—ç·´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ç¾¤]`
- `.ftiv-task/{{TASK_ID}}/review_report.md` - ãƒ¬ãƒ“ãƒ¥ãƒ¼å ±å‘Šæ›¸

### Phase 4 (Testing)
- `tests/mindmap/test_{{FEATURE_NAME}}.py` - ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
- `.ftiv-task/{{TASK_ID}}/test_report.md` - ãƒ†ã‚¹ãƒˆå ±å‘Šæ›¸

---

**ãƒ†ã‚¹ãƒˆå®Œäº†æ—¥æ™‚**: `{{END_TIME}}`
**Phase 4æ‰€è¦æ™‚é–“**: `{{DURATION}}`
**ã‚¿ã‚¹ã‚¯å…¨ä½“æ‰€è¦æ™‚é–“**: `{{TOTAL_DURATION}}`

**ğŸŠ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸã€‚**
