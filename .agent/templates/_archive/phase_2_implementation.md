# Phase 2: Implementation (Gemini担当)

**Task ID**: `{{TASK_ID}}`
**Task Title**: `{{TASK_TITLE}}`
**Started**: `{{START_TIME}}`
**AI**: Gemini 3 Pro High (Antigravity)

---

## 📖 開始前の必読ドキュメント

```bash
# 必ず最初に読んでください
cat .ftiv-task/{{TASK_ID}}/design_spec.md
cat .ftiv-task/{{TASK_ID}}/handoff_to_gemini.md
```

**重要**: Design Specに書かれていないことは実装しないでください。
追加機能が必要と感じた場合は、Implementation Logに記録し、Phase 3でClaudeに相談してください。

---

## 1️⃣ 実装チェックリスト

Phase 1のDesign Specから自動生成されたチェックリストです。
実装完了時に全てチェックしてください。

### 実装項目
- [ ] [実装項目1: ファイル名:行数]
- [ ] [実装項目2: ファイル名:行数]
- [ ] [実装項目3: ファイル名:行数]

### 動作確認項目
- [ ] [確認項目1]
- [ ] [確認項目2]

---

## 2️⃣ 実装ログ (Implementation Log)

**目的**: 実装中の判断・問題・変更をリアルタイムで記録する。

### 実装開始時刻
`{{START_TIME}}`

---

### [YYYY-MM-DD HH:MM] 実装開始
**ファイル**: `[ファイルパス]`
**実装内容**: [何を実装したか]

**コード**:
```python
# 追加したコード（重要部分のみ）
class NewClass:
    pass
```

**判断事項**:
- [Design Specと異なる実装をした場合、その理由]
- [想定外の問題に遭遇した場合、その対処]

---

### [YYYY-MM-DD HH:MM] [次の実装項目]
**ファイル**: `[ファイルパス]`
**実装内容**: [何を実装したか]

...（実装のたびに追記）

---

## 3️⃣ Design Specからの変更点

**重要**: Design Specから変更した場合は必ず記録してください。

| 項目 | Design Spec | 実装内容 | 変更理由 |
|------|-------------|---------|---------|
| [例: メソッド名] | `process_group()` | `create_group()` | より明確な命名 |
| ... | ... | ... | ... |

**変更なし**: □ Design Spec通りに実装完了

---

## 4️⃣ 動作確認結果

### 既存テスト実行
```bash
# 実行コマンド
pytest tests/ -v

# 結果
✅ 141 passed in X.XXs

# または失敗した場合
❌ 139 passed, 2 failed
  - tests/mindmap/test_xxx.py::test_yyy - [エラー内容]
  - [対処方法]
```

### 手動確認
```bash
python main.py
```

**確認項目**:
- [x] [確認項目1: 例: ツールバーにボタンが表示される]
- [x] [確認項目2: 例: ボタンクリックで機能が動作する]
- [ ] [確認項目3が失敗した場合、理由を記載]

**スクリーンショット** (任意):
[UI変更がある場合、スクリーンショットのパスを記載]

---

## 5️⃣ 発見した問題・改善提案

### 🐛 バグ・問題
| 問題 | 深刻度 | 対処状況 |
|------|--------|---------|
| [例: XXX時にクラッシュ] | 高/中/低 | 修正済み / Phase 3で相談 |

### 💡 改善提案（Phase 3でClaudeに相談）
- [提案1: 例: このロジックは別クラスに分離すべき]
- [提案2: 例: エラーハンドリングが不足している]

### ⚠️ 技術的負債
- [負債1: 例: ハードコードした値がある（定数化すべき）]

---

## 6️⃣ 未実装項目

**全て実装完了**: □

**未実装がある場合**:
| 項目 | 理由 | 対処方法 |
|------|------|---------|
| [例: XXX機能] | [理由: 依存ライブラリが不明] | Phase 3でClaudeに確認 |

---

## 7️⃣ 実装ファイルリスト

Phase 2で追加・変更したファイルの一覧です。

### 追加ファイル
```
新規作成したファイルのパス
ui/mindmap/components/group_manager.py
```

### 変更ファイル
```
既存ファイルで変更したもの
ui/controllers/mindmap_controller.py (120-180行追加)
ui/mindmap/mindmap_widget.py (ツールバーボタン追加)
```

### 差分サマリー
```bash
git diff --stat
# または
git diff > .ftiv-task/{{TASK_ID}}/implementation.diff
```

---

## 8️⃣ 次フェーズへの引き継ぎ事項

### Claudeに確認してほしいこと
1. [確認事項1: 例: XXXのアーキテクチャが適切か？]
2. [確認事項2: 例: セキュリティリスクはないか？]

### 重点レビュー箇所
- **ファイル**: `[ファイルパス:行数]`
  **理由**: [自信がない / 複雑なロジック / etc]

---

## 🤝 Phase 2完了チェックリスト

実装完了前に、以下を全て確認してください：

- [ ] Design Specの全項目が実装済み
- [ ] コードが動作する（手動確認済み）
- [ ] 実装中の判断・変更点が記録されている（Implementation Log完成）
- [ ] 既存テストが全てパスする（or 失敗理由記載）
- [ ] 明らかなバグがない（基本動作確認済み）

**全てチェックOK？** → `python scripts/task_manager.py complete-phase` を実行してPhase 3へ

---

**実装完了日時**: `{{END_TIME}}`
**実装所要時間**: `{{DURATION}}`
**次フェーズ**: Phase 3 (Claude Refinement)
